// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,r){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}e.defineMode("javascript",function(r,n){var a,i,o=r.indentUnit,c=n.statementIndent,u=n.jsonld,l=n.json||u,s=n.typescript,f=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":n,"break":n,"continue":n,"new":e("new"),"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),"let":e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":a,"typeof":a,"instanceof":a,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i,"this":e("this"),"class":e("class"),"super":e("atom"),yield:n,"export":e("export"),"import":e("import"),"extends":n,await:n};if(s){var c={type:"variable",style:"type"},u={"interface":e("class"),"implements":n,namespace:n,module:e("module"),"enum":e("module"),"public":e("modifier"),"private":e("modifier"),"protected":e("modifier"),abstract:e("modifier"),string:c,number:c,boolean:c,any:c};for(var l in u)o[l]=u[l]}return o}(),p=/[+\-*&%=<>!?|~^@]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function v(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}function y(e,t,r){return a=e,i=r,t}function k(e,r){var n=e.next();if('"'==n||"'"==n)return r.tokenize=b(n),r.tokenize(e,r);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return y("number","number");if("."==n&&e.match(".."))return y("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return y(n);if("="==n&&e.eat(">"))return y("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),y("number","number");if("0"==n&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),y("number","number");if("0"==n&&e.eat(/b/i))return e.eatWhile(/[01]/i),y("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),y("number","number");if("/"==n)return e.eat("*")?(r.tokenize=x,x(e,r)):e.eat("/")?(e.skipToEnd(),y("comment","comment")):t(e,r,1)?(v(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),y("regexp","string-2")):(e.eatWhile(p),y("operator","operator",e.current()));if("`"==n)return r.tokenize=h,h(e,r);if("#"==n)return e.skipToEnd(),y("error","error");if(p.test(n))return">"==n&&r.lexical&&">"==r.lexical.type||e.eatWhile(p),y("operator","operator",e.current());if(f.test(n)){e.eatWhile(f);var a=e.current();if("."!=r.lastType){if(d.propertyIsEnumerable(a)){var i=d[a];return y(i.type,i.style,a)}if("async"==a&&e.match(/^\s*[\(\w]/,!1))return y("async","keyword",a)}return y("variable","variable",a)}}function b(e){return function(t,r){var n,a=!1;if(u&&"@"==t.peek()&&t.match(m))return r.tokenize=k,y("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||a);)a=!a&&"\\"==n;return a||(r.tokenize=k),y("string","string")}}function x(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=k;break}n="*"==r}return y("comment","comment")}function h(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=k;break}n=!n&&"\\"==r}return y("quasi","string-2",e.current())}var w="([{}])";function g(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(s){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var a=0,i=!1,o=r-1;o>=0;--o){var c=e.string.charAt(o),u=w.indexOf(c);if(u>=0&&u<3){if(!a){++o;break}if(0==--a){"("==c&&(i=!0);break}}else if(u>=3&&u<6)++a;else if(f.test(c))i=!0;else{if(/["'\/]/.test(c))return;if(i&&!a){++o;break}}}i&&!a&&(t.fatArrowAt=o)}}var j={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0};function M(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function V(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}function E(e,t,r,n,a){var i=e.cc;for(I.state=e,I.stream=a,I.marked=null,I.cc=i,I.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){if((i.length?i.pop():l?N:S)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return I.marked?I.marked:"variable"==r&&V(e,n)?"variable-2":t}}}var I={state:null,column:null,marked:null,cc:null};function z(){for(var e=arguments.length-1;e>=0;e--)I.cc.push(arguments[e])}function A(){return z.apply(null,arguments),!0}function T(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var r=I.state;if(I.marked="def",r.context){if(t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}var $={name:"this",next:{name:"arguments"}};function q(){I.state.context={prev:I.state.context,vars:I.state.localVars},I.state.localVars=$}function C(){I.state.localVars=I.state.context.vars,I.state.context=I.state.context.prev}function O(e,t){var r=function(){var r=I.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var a=r.lexical;a&&")"==a.type&&a.align;a=a.prev)n=a.indented;r.lexical=new M(n,I.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function W(){var e=I.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function P(e){function t(r){return r==e?A():";"==e?z():A(t)}return t}function S(e,t){return"var"==e?A(O("vardef",t.length),pe,P(";"),W):"keyword a"==e?A(O("form"),H,S,W):"keyword b"==e?A(O("form"),S,W):"{"==e?A(O("}"),oe,W):";"==e?A():"if"==e?("else"==I.state.lexical.info&&I.state.cc[I.state.cc.length-1]==W&&I.state.cc.pop()(),A(O("form"),H,S,W,be)):"function"==e?A(Me):"for"==e?A(O("form"),xe,S,W):"variable"==e?s&&"type"==t?(I.marked="keyword",A(ue,P("operator"),ue,P(";"))):A(O("stat"),_):"switch"==e?A(O("form"),H,P("{"),O("}","switch"),oe,W,W):"case"==e?A(N,P(":")):"default"==e?A(P(":")):"catch"==e?A(O("form"),q,P("("),Ve,P(")"),S,W,C):"class"==e?A(O("form"),Ie,W):"export"==e?A(O("stat"),$e,W):"import"==e?A(O("stat"),Ce,W):"module"==e?A(O("form"),me,P("{"),O("}"),oe,W,W):"async"==e?A(S):"@"==t?A(N,S):z(O("stat"),N,P(";"),W)}function N(e){return U(e,!1)}function B(e){return U(e,!0)}function H(e){return"("!=e?z():A(O(")"),N,P(")"),W)}function U(e,t){if(I.state.fatArrowAt==I.stream.start){var r=t?R:Q;if("("==e)return A(q,O(")"),ae(me,")"),W,P("=>"),r,C);if("variable"==e)return z(q,me,P("=>"),r,C)}var n=t?J:G;return j.hasOwnProperty(e)?A(n):"function"==e?A(Me,n):"class"==e?A(O("form"),Ee,W):"keyword c"==e||"async"==e?A(t?F:D):"("==e?A(O(")"),D,P(")"),W,n):"operator"==e||"spread"==e?A(t?B:N):"["==e?A(O("]"),Ne,W,n):"{"==e?ie(te,"}",null,n):"quasi"==e?z(K,n):"new"==e?A(X(t)):A()}function D(e){return e.match(/[;\}\)\],]/)?z():z(N)}function F(e){return e.match(/[;\}\)\],]/)?z():z(B)}function G(e,t){return","==e?A(N):J(e,t,!1)}function J(e,t,r){var n=0==r?G:J,a=0==r?N:B;return"=>"==e?A(q,r?R:Q,C):"operator"==e?/\+\+|--/.test(t)?A(n):"?"==t?A(N,P(":"),a):A(a):"quasi"==e?z(K,n):";"!=e?"("==e?ie(B,")","call",n):"."==e?A(ee,n):"["==e?A(O("]"),D,P("]"),W,n):s&&"as"==t?(I.marked="keyword",A(ue,n)):void 0:void 0}function K(e,t){return"quasi"!=e?z():"${"!=t.slice(t.length-2)?A(K):A(N,L)}function L(e){if("}"==e)return I.marked="string-2",I.state.tokenize=h,A(K)}function Q(e){return g(I.stream,I.state),z("{"==e?S:N)}function R(e){return g(I.stream,I.state),z("{"==e?S:B)}function X(e){return function(t){return"."==t?A(e?Z:Y):z(e?B:N)}}function Y(e,t){if("target"==t)return I.marked="keyword",A(G)}function Z(e,t){if("target"==t)return I.marked="keyword",A(J)}function _(e){return":"==e?A(W,S):z(G,P(";"),W)}function ee(e){if("variable"==e)return I.marked="property",A()}function te(e,t){return"async"==e?(I.marked="property",A(te)):"variable"==e||"keyword"==I.style?(I.marked="property",A("get"==t||"set"==t?re:ne)):"number"==e||"string"==e?(I.marked=u?"property":I.style+" property",A(ne)):"jsonld-keyword"==e?A(ne):"modifier"==e?A(te):"["==e?A(N,P("]"),ne):"spread"==e?A(N,ne):":"==e?z(ne):void 0}function re(e){return"variable"!=e?z(ne):(I.marked="property",A(Me))}function ne(e){return":"==e?A(B):"("==e?z(Me):void 0}function ae(e,t,r){function n(a,i){if(r?r.indexOf(a)>-1:","==a){var o=I.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),A(function(r,n){return r==t||n==t?z():z(e)},n)}return a==t||i==t?A():A(P(t))}return function(r,a){return r==t||a==t?A():z(e,n)}}function ie(e,t,r){for(var n=3;n<arguments.length;n++)I.cc.push(arguments[n]);return A(O(t,r),ae(e,t),W)}function oe(e){return"}"==e?A():z(S,oe)}function ce(e,t){if(s){if(":"==e)return A(ue);if("?"==t)return A(ce)}}function ue(e){return"variable"==e?(I.marked="type",A(de)):"string"==e||"number"==e||"atom"==e?A(de):"{"==e?A(O("}"),ae(se,"}",",;"),W,de):"("==e?A(ae(fe,")"),le):void 0}function le(e){if("=>"==e)return A(ue)}function se(e,t){return"variable"==e||"keyword"==I.style?(I.marked="property",A(se)):"?"==t?A(se):":"==e?A(ue):"["==e?A(N,ce,P("]"),se):void 0}function fe(e){return"variable"==e?A(fe):":"==e?A(ue):void 0}function de(e,t){return"<"==t?A(O(">"),ae(ue,">"),W,de):"|"==t||"."==e?A(ue):"["==e?A(P("]"),de):"extends"==t?A(ue):void 0}function pe(){return z(me,ce,ye,ke)}function me(e,t){return"modifier"==e?A(me):"variable"==e?(T(t),A()):"spread"==e?A(me):"["==e?ie(me,"]"):"{"==e?ie(ve,"}"):void 0}function ve(e,t){return"variable"!=e||I.stream.match(/^\s*:/,!1)?("variable"==e&&(I.marked="property"),"spread"==e?A(me):"}"==e?z():A(P(":"),me,ye)):(T(t),A(ye))}function ye(e,t){if("="==t)return A(B)}function ke(e){if(","==e)return A(pe)}function be(e,t){if("keyword b"==e&&"else"==t)return A(O("form","else"),S,W)}function xe(e){if("("==e)return A(O(")"),he,P(")"),W)}function he(e){return"var"==e?A(pe,P(";"),ge):";"==e?A(ge):"variable"==e?A(we):z(N,P(";"),ge)}function we(e,t){return"in"==t||"of"==t?(I.marked="keyword",A(N)):A(G,ge)}function ge(e,t){return";"==e?A(je):"in"==t||"of"==t?(I.marked="keyword",A(N)):z(N,P(";"),je)}function je(e){")"!=e&&A(N)}function Me(e,t){return"*"==t?(I.marked="keyword",A(Me)):"variable"==e?(T(t),A(Me)):"("==e?A(q,O(")"),ae(Ve,")"),W,ce,S,C):s&&"<"==t?A(O(">"),ae(ue,">"),W,Me):void 0}function Ve(e){return"spread"==e?A(Ve):z(me,ce,ye)}function Ee(e,t){return"variable"==e?Ie(e,t):ze(e,t)}function Ie(e,t){if("variable"==e)return T(t),A(ze)}function ze(e,t){return"<"==t?A(O(">"),ae(ue,">"),W,ze):"extends"==t||"implements"==t||s&&","==e?A(s?ue:N,ze):"{"==e?A(O("}"),Ae,W):void 0}function Ae(e,t){return"variable"==e||"keyword"==I.style?("async"==t||"static"==t||"get"==t||"set"==t||s&&("public"==t||"private"==t||"protected"==t||"readonly"==t||"abstract"==t))&&I.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(I.marked="keyword",A(Ae)):(I.marked="property",A(s?Te:Me,Ae)):"["==e?A(N,P("]"),s?Te:Me,Ae):"*"==t?(I.marked="keyword",A(Ae)):";"==e?A(Ae):"}"==e?A():"@"==t?A(N,Ae):void 0}function Te(e,t){return"?"==t?A(Te):":"==e?A(ue,ye):"="==t?A(B):z(Me)}function $e(e,t){return"*"==t?(I.marked="keyword",A(Se,P(";"))):"default"==t?(I.marked="keyword",A(N,P(";"))):"{"==e?A(ae(qe,"}"),Se,P(";")):z(S)}function qe(e,t){return"as"==t?(I.marked="keyword",A(P("variable"))):"variable"==e?z(B,qe):void 0}function Ce(e){return"string"==e?A():z(Oe,We,Se)}function Oe(e,t){return"{"==e?ie(Oe,"}"):("variable"==e&&T(t),"*"==t&&(I.marked="keyword"),A(Pe))}function We(e){if(","==e)return A(Oe,We)}function Pe(e,t){if("as"==t)return I.marked="keyword",A(Oe)}function Se(e,t){if("from"==t)return I.marked="keyword",A(N)}function Ne(e){return"]"==e?A():z(ae(B,"]"))}function Be(e,t){return"operator"==e.lastType||","==e.lastType||p.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}return W.lex=!0,{startState:function(e){var t={tokenize:k,lastType:"sof",cc:[],lexical:new M((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),g(e,t)),t.tokenize!=x&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==a?r:(t.lastType="operator"!=a||"++"!=i&&"--"!=i?a:"incdec",E(t,r,a,i,e))},indent:function(t,r){if(t.tokenize==x)return e.Pass;if(t.tokenize!=k)return 0;var a,i=r&&r.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(r))for(var l=t.cc.length-1;l>=0;--l){var s=t.cc[l];if(s==W)u=u.prev;else if(s!=be)break}for(;("stat"==u.type||"form"==u.type)&&("}"==i||(a=t.cc[t.cc.length-1])&&(a==G||a==J)&&!/^[,\.=+\-*:?[\(]/.test(r));)u=u.prev;c&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var f=u.type,d=i==f;return"vardef"==f?u.indented+("operator"==t.lastType||","==t.lastType?u.info+1:0):"form"==f&&"{"==i?u.indented:"form"==f?u.indented+o:"stat"==f?u.indented+(Be(t,r)?c||o:0):"switch"!=u.info||d||0==n.doubleIndentSwitch?u.align?u.column+(d?0:1):u.indented+(d?0:o):u.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:u,jsonMode:l,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=N&&t!=B||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});